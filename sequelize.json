{
    "sequelize:model": {
        "scope": "javascript",
        "prefix": "sequelize:model",
        "body": [
            "import {DataTypes} from 'sequelize'",
            "import db from '${2:db}';",
            "",
            "const ${TM_FILENAME_BASE}Model = db.define('${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}', {",
            "$2",
            "}, {",
            "modelName: '${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}'",
            "} );",
            "",
            "export default ${TM_FILENAME_BASE}Model;"
        ]
    },
    "Create table migrations": {
        "scope": "javascript",
        "prefix": "sequelize:migration-create-table",
        "body": [
            "const Sequelize = require( \"sequelize\" );",
            "",
            "/**",
            " * @link https://sequelize.readthedocs.io/en/latest/docs/migrations/",
            " */",
            "",
            "module.exports = {",
            "    /**",
            "     * @param {Sequelize.QueryInterface} queryInterface",
            "     * @param {Sequelize} Sequelize",
            "     */",
            "    up: ( queryInterface, { STRING, INTEGER, DATE } ) => {",
            "        return queryInterface.createTable( '$1', {",
            "            id: {",
            "                allowNull: false,",
            "                autoIncrement: true,",
            "                primaryKey: true,",
            "                type: INTEGER",
            "            },",
            "            $2",
            "            createdAt: {",
            "                allowNull: false,",
            "                type: DATE",
            "            },",
            "            updatedAt: {",
            "                allowNull: false,",
            "                type: DATE",
            "            },",
            "        } );",
            "    },",
            "    /**",
            "     * @param {Sequelize.QueryInterface} queryInterface",
            "     * @param {Sequelize} Sequelize",
            "     */",
            "    down: ( queryInterface, {} ) => {",
            "        return queryInterface.dropTable( '$1' );",
            "    }",
            "};"
        ]
    },
    "add index migrations": {
        "scope": "javascript",
        "prefix": "sequelize:migration-add-index",
        "body": [
            "const Sequelize = require( \"sequelize\" );",
            "",
            "/**",
            " * @link https://sequelize.readthedocs.io/en/latest/docs/migrations/",
            " */",
            "",
            "module.exports = {",
            "    /**",
            "     * @param {Sequelize.QueryInterface} queryInterface",
            "     * @param {Sequelize} Sequelize",
            "     */",
            "    up: ( queryInterface, _sequelize ) => {",
            "        return queryInterface.addIndex( '$1', [$2], {$3} )",
            "    },",
            "    /**",
            "     * @param {Sequelize.QueryInterface} queryInterface",
            "     * @param {Sequelize} Sequelize",
            "     */",
            "    down: ( queryInterface, _sequelize ) => {",
            "        return queryInterface.removeIndex( '$1', [$2], {$3}  );",
            "    }",
            "};"
        ]
    },
    "add constraint migrations": {
        "scope": "javascript",
        "prefix": "sequelize:migration-add-constraint",
        "body": [
            "const Sequelize = require( \"sequelize\" );",
            "",
            "/**",
            " * @link https://sequelize.readthedocs.io/en/latest/docs/migrations/",
            " */",
            "",
            "const CONSTRAINT_NAME = \"$3\"",
            "",
            "module.exports = {",
            "    /**",
            "     * @param {Sequelize.QueryInterface} queryInterface",
            "     * @param {Sequelize} Sequelize",
            "     */",
            "    up: ( queryInterface, _sequelize ) => {",
            "        return queryInterface.addConstraint( '$1', [$2], {",
            "            name: CONSTRAINT_NAME,",
            "            type:\"$4\"",
            "        } )",
            "    },",
            "    /**",
            "     * @param {Sequelize.QueryInterface} queryInterface",
            "     * @param {Sequelize} Sequelize",
            "     */",
            "    down: ( queryInterface, _sequelize ) => {",
            "        return queryInterface.removeConstraint( '$1', CONSTRAINT_NAME );",
            "    }",
            "};"
        ]
    },
    "sequelize:seed": {
        "scope": "javascript",
        "prefix": "sequelize:seed",
        "body": [
            "module.exports = {",
            "    up: ( queryInterface, Sequelize ) => {",
            "        return queryInterface.bulkInsert( $1,",
            "            [",
            "                $2",
            "            ],",
            "            {}",
            "        );",
            "    },",
            "    down: ( queryInterface, Sequelize ) => {",
            "        return queryInterface.bulkDelete( $1,",
            "            null,",
            "            {}",
            "        );",
            "    }",
            "};"
        ]
    },
    "sequelize-ts:model": {
        "scope": "typescript",
        "prefix": "sequelize:model",
        "body": [
            "import * as Sequelize from 'sequelize';",
            "",
            "import { SequelizeAttributes } from 'typings/SequelizeAttributes/index';",
            "import db from 'db';",
            "",
            "interface I${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Attributes {}",
            "",
            "export interface ${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Instance extends Sequelize.Instance<I${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Attributes>, I${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Attributes {",
            "    \/\/ associations",
            "}",
            "",
            "const attributes: SequelizeAttributes<I${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Attributes> = {",
            "};",
            "",
            "const ${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/} = db.define<${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Instance, I${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}Attributes>( '${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}', attributes, {});",
            "",
            "${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/}.associate = function ( models: Sequelize.Models ) {",
            "    \/\/ associations can be defined here",
            "};",
            "",
            "export default ${TM_FILENAME_BASE/(.*)$/${1:/capitalize}/};"
        ]
    }
}